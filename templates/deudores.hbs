<script type="text/ractive" id="tpl-deudores">
	{{#if loading}}
        <span class="mini-loading"></span> Cargando...
    {{else}}
        {{#if deudores.length > 0}}
        <p class="lead">Deudores</p>
        <div class="table-responsive">
            <p class="text-muted">Mostrando s贸lo deudores con saldo mayor a cero</p>
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Nombre</th>
                        <th>Descripci贸n</th>
                        <th>Total deuda</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each deudores}}
                        {{#if no_pagadas && no_pagadas > 0}}
                            <tr>
                                <td>{{id}}</td>
                                <td>{{nombre}}</td>
                                <td>{{descripcion}}</td>
                                <td>{{formatearDinero(!no_pagadas ? 0 : no_pagadas)}}</td>
                                <td>
                                    <a href="javascript:;" on-click="marcar_pagadas:{{id}}" class="btn btn-xs btn-success"
                                        title="Marcar pagadas" data-mpid="{{id}}">
                                        <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
                                    </a>
                                    <a href="javascript:;" on-click="editar:{{id}}" class="btn btn-xs btn-primary">
                                        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                        Editar
                                    </a>
                                    <a href="javascript:;" on-click="borrar:{{id}}" class="btn btn-xs btn-danger">
                                        <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                        Eliminar
                                    </a>
                                </td>
                            </tr>
                        {{/if}}
                    {{/each}}
                    <tr>
                        <td colspan="3" class="text-right"><b>Total:</b></td>
                        <td colspan="2">{{formatearDinero(total_no_pagadas)}}</td>
                    </tr>
                </tbody>
            </table>
        </div>

        {{else}}
        <p class="lead">No hay deudores registrados</p>
        {{/if}}
    {{/if}}
</script>

<!-- Formulario agregar/editar deudores -->
<form action="javascript:;" method="POST" class="modal fade" id="agregar-deudor" name="agregar_deudor" role="form">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Agregar deudor</h4>
            </div>
            <div class="modal-body">
                <div class="form-horizontal">
                    <div class="form-group">
                        <label for="nombre" class="col-sm-3 control-label">Nombre</label>
                        <div class="col-sm-9">
                            <input type="text" name="nombre" id="nombre" class="form-control" value="" required="required">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="descripcion" class="col-sm-3 control-label">Descripci贸n</label>
                        <div class="col-sm-9">
                            <input type="text" name="descripcion" id="descripcion" class="form-control" placeholder="Sin descripci贸n" value="">
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                <button type="submit" class="btn btn-success">Agregar</button>
            </div>
        </div>
    </div>
</form>
